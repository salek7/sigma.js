import{g as V}from"./_commonjsHelpers-BosuxZz1.js";import{r as W}from"./sigma-DZ8Rw7GN.js";import{a as O,r as T}from"./getters-sgVfsx1C.js";var I,Y;function U(){if(Y)return I;Y=1;const{createNodeValueGetter:d,createEdgeValueGetter:l}=O();return I=function(u,o,a){const{nodeXAttribute:i,nodeYAttribute:s}=a,{attraction:b,repulsion:w,gravity:F,inertia:G,maxMove:D}=a.settings;let{shouldSkipNode:m,shouldSkipEdge:A,isNodeFixed:C}=a;C=d(C),m=d(m,!1),A=l(A,!1);const p=u.filterNodes((e,n)=>!m.fromEntry(e,n)),k=p.length;for(let e=0;e<k;e++){const n=p[e],t=u.getNodeAttributes(n),r=o[n];r?o[n]={dx:r.dx*G,dy:r.dy*G,x:t[i]||0,y:t[s]||0}:o[n]={dx:0,dy:0,x:t[i]||0,y:t[s]||0}}if(w)for(let e=0;e<k;e++){const n=p[e],t=o[n];for(let r=e+1;r<k;r++){const f=p[r],c=o[f],q=c.x-t.x,h=c.y-t.y,x=Math.sqrt(q*q+h*h)||1,g=w/x*q,v=w/x*h;t.dx-=g,t.dy-=v,c.dx+=g,c.dy+=v}}if(b&&u.forEachEdge((e,n,t,r,f,c,q)=>{if(t===r||m.fromEntry(t,f)||m.fromEntry(r,c)||A.fromEntry(e,n,t,r,f,c,q))return;const h=o[t],x=o[r],g=x.x-h.x,v=x.y-h.y,M=Math.sqrt(g*g+v*v)||1,R=b*M*g,X=b*M*v;h.dx+=R,h.dy+=X,x.dx-=R,x.dy-=X}),F)for(let e=0;e<k;e++){const n=p[e],t=o[n],{x:r,y:f}=t,c=Math.sqrt(r*r+f*f)||1;o[n].dx-=r*F*c,o[n].dy-=f*F*c}const K=!1;for(let e=0;e<k;e++){const n=p[e],t=o[n],r=Math.sqrt(t.dx*t.dx+t.dy*t.dy);r>D&&(t.dx*=D/r,t.dy*=D/r),C.fromGraph(u,n)?t.fixed=!0:(t.x+=t.dx,t.y+=t.dy,t.fixed=!1)}return{converged:K}},I}var E={},L;function $(){return L||(L=1,E.assignLayoutChanges=function(d,l,y){const{nodeXAttribute:u,nodeYAttribute:o}=y;d.updateEachNodeAttributes((a,i)=>{const s=l[a];return!s||s.fixed||(i[u]=s.x,i[o]=s.y),i},{attributes:["x","y"]})},E.collectLayoutChanges=function(d){const l={};for(const y in d){const u=d[y];l[y]={x:u.x,y:u.y}}return l}),E}var N,j;function z(){return j||(j=1,N={nodeXAttribute:"x",nodeYAttribute:"y",isNodeFixed:"fixed",shouldSkipNode:null,shouldSkipEdge:null,settings:{attraction:5e-4,repulsion:.1,gravity:1e-4,inertia:.6,maxMove:200}}),N}var S,H;function B(){if(H)return S;H=1;const d=W(),l=T(),y=U(),u=$(),o=z();function a(i,s){if(!d(i))throw new Error("graphology-layout-force/worker: the given graph is not a valid graphology instance.");s=l(s,o),this.callbacks={},s.onConverged&&(this.callbacks.onConverged=s.onConverged),this.graph=i,this.params=s,this.nodeStates={},this.frameID=null,this.running=!1,this.killed=!1}return a.prototype.isRunning=function(){return this.running},a.prototype.runFrame=function(){let{converged:i}=y(this.graph,this.nodeStates,this.params);u.assignLayoutChanges(this.graph,this.nodeStates,this.params),i=!1,i?(this.callbacks.onConverged&&this.callbacks.onConverged(),this.stop()):this.frameID=window.requestAnimationFrame(()=>this.runFrame())},a.prototype.stop=function(){return this.running=!1,this.frameID!==null&&(window.cancelAnimationFrame(this.frameID),this.frameID=null),this},a.prototype.start=function(){if(this.killed)throw new Error("graphology-layout-force/worker.start: layout was killed.");this.running||(this.running=!0,this.runFrame())},a.prototype.kill=function(){this.stop(),delete this.nodeStates,this.killed=!0},S=a,S}var J=B();const _=V(J);export{_ as F};
